<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <link href="https://fonts.googleapis.com/css2?family=Jua&display=swap" rel="stylesheet">

    <title>독서로 마음 나누기</title>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
            crossorigin="anonymous"></script>
    <style>
        * {
            font-family: 'Jua', sans-serif;
        }
    </style>
    <script>
        function reviewSubmit() {
            let url = prompt("URL을 입력하세요.");

            if (url == null)
                return false;
            else if (urlChk(url)) {
                document.getElementById("bookUrl").value = url;
            } else {
                return false;
            }
        }

        function urlChk(url) {
            let chkUrl = 'https://search.shopping.naver.com/book/catalog';

            if (!url.includes('.')) {
                alert('URL 형식이 올바르지 않습니다.');
                return false;
            }

            if (!url.includes(chkUrl)) {
                alert('네이버 책이 아닙니다. 다시 입력해주세요.');
                return false;
            }
            return true;
        }
    </script>
</head>
<body>
    <div class="mytitle">

        <div class="mmytitle">
            <p class="mTitle"><a href="/">독서로 마음 나누기</a></p>
        </div>

        <!--        <p>현재기온:<span id="temp"> </span>℃</p>-->
        <div class="best">
            <h6>
                <b>🏆월간 베스트셀러</b>
            </h6>

            <table class="table table-hover">
                <thead>
                <tr>
                    <th scope="col">#</th>
                    <th scope="col">도서명</th>
                    <th scope="col">작가</th>
                    <th scope="col">출판사</th>
                </tr>
                </thead>
                <tbody>
                <tr id="rank1">
                    <th scope="row">1</th>
                    <td>하얼빈</td>
                    <td>김훈</td>
                    <td>문학동네</td>
                </tr>
                <tr id="rank2">
                    <th scope="row">2</th>
                    <td>불편한 편의점 2</td>
                    <td>김호연</td>
                    <td>나무옆의자</td>
                </tr>
                <tr id="rank3">
                    <th scope="row">3</th>
                    <td>역행자 (10만부 기념 페이크 에디션)</td>
                    <td>자청</td>
                    <td>웅진지식하우스</td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
    <form action="/test2" method="get" onsubmit="return reviewSubmit()">
        <div class="mBtn">
            <input type="hidden" id="bookUrl" name="bUrl">
            <input id="reviewBtn" class="btn btn-light" type="submit" value="🙌🏻 마 음 공 유 🙌🏻">
        </div>
    </form>

    <div>
<!--윗줄 div 안에 align="center"는 삭제하고 스타일로 처리 -->
        <input type="text" id="copyUrl" value="https://search.shopping.naver.com/book/search/category?bookTabType=ALL&catId=50005561&pageIndex=1&pageSize=40" style="display: none;"/>
        <input type="button" onclick="copyBookUrl()" value="URL 복사"/>
        <input type="button" onclick="window.open('https://search.shopping.naver.com/book/search/category?bookTabType=ALL&catId=50005561&pageIndex=1&pageSize=40')" value="URL 이동"/>
    </div>

    <div class="mycards">
        <div class="row row-cols-1 row-cols-md-4 g-4" id="cards-box">


            {% for book in books %}
                {% set s = book['star'] | int %}
            <div class="col">
                <div class="card h-100">
                    <a href="/{{book['bnum']}}">
                        <img src="{{book['image']}}" class="card-img-top" height="350px">
                    </a>
                    <div class="card-body">
                        <a href="/{{book['bnum']}}">
                            <h5 class="card-title">{{book['title']}}</h5>
                        </a>
                        {% for i in range(s) %}
                            <span>⭐</span>
                        {% endfor %}

                        <hr>

                        <p class="card-text">{{book['content']}}</p>
                    </div>
                </div>
            </div>
            {% endfor %}


</body>
</html>